{"version":3,"sources":["../../../src/cleave.js/shortcuts/DateFormatter.js"],"names":[],"mappings":"AAAA,YAAY,CAAC;;AAEb,IAAI,aAAa,GAAG,SAAhB,aAAa,CAAa,WAAW,EAAE;AACvC,QAAI,KAAK,GAAG,IAAI,CAAC;;AAEjB,SAAK,CAAC,MAAM,GAAG,EAAE,CAAC;AAClB,SAAK,CAAC,WAAW,GAAG,WAAW,CAAC;AAChC,SAAK,CAAC,UAAU,EAAE,CAAC;CACtB,CAAC;;AAEF,aAAa,CAAC,SAAS,GAAG;AACtB,cAAU,EAAE,sBAAY;AACpB,YAAI,KAAK,GAAG,IAAI,CAAC;AACjB,aAAK,CAAC,WAAW,CAAC,OAAO,CAAC,UAAU,KAAK,EAAE;AACvC,gBAAI,KAAK,KAAK,GAAG,EAAE;AACf,qBAAK,CAAC,MAAM,CAAC,IAAI,CAAC,CAAC,CAAC,CAAC;aACxB,MAAM;AACH,qBAAK,CAAC,MAAM,CAAC,IAAI,CAAC,CAAC,CAAC,CAAC;aACxB;SACJ,CAAC,CAAC;KACN;;AAED,aAAS,EAAE,qBAAY;AACnB,eAAO,IAAI,CAAC,MAAM,CAAC;KACtB;;AAED,oBAAgB,EAAE,0BAAU,KAAK,EAAE;AAC/B,YAAI,KAAK,GAAG,IAAI;YAAE,MAAM,GAAG,EAAE,CAAC;;AAE9B,aAAK,GAAG,KAAK,CAAC,OAAO,CAAC,QAAQ,EAAE,EAAE,CAAC,CAAC;;AAEpC,aAAK,CAAC,MAAM,CAAC,OAAO,CAAC,UAAU,MAAM,EAAE,KAAK,EAAE;AAC1C,gBAAI,KAAK,CAAC,MAAM,GAAG,CAAC,EAAE;AAClB,oBAAI,GAAG,GAAG,KAAK,CAAC,KAAK,CAAC,CAAC,EAAE,MAAM,CAAC;oBAC5B,IAAI,GAAG,GAAG,CAAC,KAAK,CAAC,CAAC,EAAE,CAAC,CAAC;oBACtB,IAAI,GAAG,KAAK,CAAC,KAAK,CAAC,MAAM,CAAC,CAAC;;AAE/B,wBAAQ,KAAK,CAAC,WAAW,CAAC,KAAK,CAAC;AAChC,yBAAK,GAAG;AACJ,4BAAI,GAAG,KAAK,IAAI,EAAE;AACd,+BAAG,GAAG,IAAI,CAAC;yBACd,MAAM,IAAI,QAAQ,CAAC,IAAI,EAAE,EAAE,CAAC,GAAG,CAAC,EAAE;AAC/B,+BAAG,GAAG,GAAG,GAAG,IAAI,CAAC;yBACpB,MAAM,IAAI,QAAQ,CAAC,GAAG,EAAE,EAAE,CAAC,GAAG,EAAE,EAAE;AAC/B,+BAAG,GAAG,IAAI,CAAC;yBACd;;AAED,8BAAM;;AAAA,AAEV,yBAAK,GAAG;AACJ,4BAAI,GAAG,KAAK,IAAI,EAAE;AACd,+BAAG,GAAG,IAAI,CAAC;yBACd,MAAM,IAAI,QAAQ,CAAC,IAAI,EAAE,EAAE,CAAC,GAAG,CAAC,EAAE;AAC/B,+BAAG,GAAG,GAAG,GAAG,IAAI,CAAC;yBACpB,MAAM,IAAI,QAAQ,CAAC,GAAG,EAAE,EAAE,CAAC,GAAG,EAAE,EAAE;AAC/B,+BAAG,GAAG,IAAI,CAAC;yBACd;;AAED,8BAAM;AAAA,iBACT;;AAED,sBAAM,IAAI,GAAG,CAAC;;;AAGd,qBAAK,GAAG,IAAI,CAAC;aAChB;SACJ,CAAC,CAAC;;AAEH,eAAO,MAAM,CAAC;KACjB;CACJ,CAAC;;AAEF,IAAI,OAAO,MAAM,KAAK,QAAQ,IAAI,OAAO,MAAM,CAAC,OAAO,KAAK,QAAQ,EAAE;AAClE,UAAM,CAAC,OAAO,GAAG,OAAO,GAAG,aAAa,CAAC;CAC5C","file":"DateFormatter.js","sourcesContent":["'use strict';\n\nvar DateFormatter = function (datePattern) {\n    var owner = this;\n\n    owner.blocks = [];\n    owner.datePattern = datePattern;\n    owner.initBlocks();\n};\n\nDateFormatter.prototype = {\n    initBlocks: function () {\n        var owner = this;\n        owner.datePattern.forEach(function (value) {\n            if (value === 'Y') {\n                owner.blocks.push(4);\n            } else {\n                owner.blocks.push(2);\n            }\n        });\n    },\n\n    getBlocks: function () {\n        return this.blocks;\n    },\n\n    getValidatedDate: function (value) {\n        var owner = this, result = '';\n\n        value = value.replace(/[^\\d]/g, '');\n\n        owner.blocks.forEach(function (length, index) {\n            if (value.length > 0) {\n                var sub = value.slice(0, length),\n                    sub0 = sub.slice(0, 1),\n                    rest = value.slice(length);\n\n                switch (owner.datePattern[index]) {\n                case 'd':\n                    if (sub === '00') {\n                        sub = '01';\n                    } else if (parseInt(sub0, 10) > 3) {\n                        sub = '0' + sub0;\n                    } else if (parseInt(sub, 10) > 31) {\n                        sub = '31';\n                    }\n\n                    break;\n\n                case 'm':\n                    if (sub === '00') {\n                        sub = '01';\n                    } else if (parseInt(sub0, 10) > 1) {\n                        sub = '0' + sub0;\n                    } else if (parseInt(sub, 10) > 12) {\n                        sub = '12';\n                    }\n\n                    break;\n                }\n\n                result += sub;\n\n                // update remaining string\n                value = rest;\n            }\n        });\n\n        return result;\n    }\n};\n\nif (typeof module === 'object' && typeof module.exports === 'object') {\n    module.exports = exports = DateFormatter;\n}\n"]}